import{useApi as e,definePanel as t}from"@directus/extensions-sdk";import{defineComponent as n,ref as a,onMounted as r,openBlock as i,createElementBlock as s,createElementVNode as d,normalizeClass as o,toDisplayString as l}from"vue";var u=n({props:{showHeader:{type:Boolean,default:!1},text:{type:String,default:""},url:{type:String,default:"/ssr"}},setup(t){const n=a(t.url);return r((async()=>{if(n.value.startsWith("/")){const t=e(),{data:a}=await t.get("/user/getAccessToken");n.value=`${n.value}${n.value.includes("?")?"&":"?"}access_token=${a.data.token}`}else null===n.value.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)&&(n.value="/ssr")})),{src:n}}});const p={class:"panel-ssr-container"},c=["src"];var f=[],m=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,a=!0===t.prepend?"prepend":"append",r=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(r){var s=f.indexOf(i);-1===s&&(s=f.push(i)-1,m[s]={}),n=m[s]&&m[s][a]?m[s][a]:m[s][a]=d()}else n=d();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function d(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),r=0;r<n.length;r++)e.setAttribute(n[r],t.attributes[n[r]]);var s="prepend"===a?"afterbegin":"beforeend";return i.insertAdjacentElement(s,e),e}}("\n.text[data-v-0129a3fb] {\n\tpadding: 12px;\n}\n.text.has-header[data-v-0129a3fb] {\n\tpadding: 0 12px;\n}\niframe[data-v-0129a3fb]{\n\twidth: 100vw !important;\n\theight: 100vh !important;\n\toverflow-y: auto !important;\n\tborder: unset !important;\n}\n.panel-ssr-container[data-v-0129a3fb]{\n\tdisplay: flex;\n\talign-content: center;\n\tjustify-content: center;\n\twidth: 100% !important;\n\theight: 100% !important;\n}\n",{}),u.render=function(e,t,n,a,r,u){return i(),s("div",null,[d("div",{class:o(["text",{"has-header":e.showHeader}])},l(e.text),3),d("div",p,[d("iframe",{src:e.src},null,8,c)])])},u.__scopeId="data-v-0129a3fb",u.__file="src/panel.vue";var v=t({id:"mgx-panel-ssr",name:"Panel SSR",icon:"box",description:"Here a an alternative way of displaying panel data using server side rendering",component:u,options:()=>[{field:"url",type:"string",name:"$t:url",meta:{width:"full",interface:"input"}},{field:"text",name:"Text",type:"string",meta:{interface:"input",width:"full"}}],minWidth:12,minHeight:8});export{v as default};
