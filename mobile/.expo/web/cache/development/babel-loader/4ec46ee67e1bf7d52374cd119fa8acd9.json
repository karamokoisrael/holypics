{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\"],\n    _excluded2 = [\"style\", \"children\"],\n    _excluded3 = [\"forwardedRef\", \"onScroll\", \"scrollEventThrottle\"];\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport NativePressable from \"react-native-web/dist/exports/Pressable\";\nimport NativeScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport NativeFlatList from \"react-native-web/dist/exports/FlatList\";\nimport NativeVirtualizedList from \"react-native-web/dist/exports/VirtualizedList\";\nvar isServer = typeof process !== 'undefined' && process.release && process.release.name === 'node';\nvar hoverListener = createHoverListener();\nexport function Hoverable(_ref) {\n  var children = _ref.children,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var hostRef = React.useRef(null);\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      hovered = _React$useState2[0],\n      setHovered = _React$useState2[1];\n\n  React.useEffect(function () {\n    var hr = hostRef.current;\n    hoverListener.add(hr, setHovered);\n    return function () {\n      hoverListener.remove(hr);\n    };\n  }, [setHovered, hostRef]);\n  return React.createElement(View, _extends({\n    ref: hostRef,\n    children: typeof children === 'function' ? children({\n      hovered: hovered\n    }) : children\n  }, rest));\n}\n\nfunction PressableWithoutRef(_ref2, forwardedRef) {\n  var _style = _ref2.style,\n      _children = _ref2.children,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  var hostRef = React.useRef(null);\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      hovered = _React$useState4[0],\n      setHovered = _React$useState4[1];\n\n  var setRef = setAndForwardRef({\n    getForwardedRef: function getForwardedRef() {\n      return forwardedRef;\n    },\n    setLocalRef: function setLocalRef(hostNode) {\n      hostRef.current = hostNode;\n    }\n  });\n  React.useEffect(function () {\n    var hr = hostRef.current;\n    hoverListener.add(hr, setHovered);\n    return function () {\n      hoverListener.remove(hr);\n    };\n  }, [setHovered, hostRef]);\n  return React.createElement(NativePressable, _extends({\n    ref: setRef,\n    style: function style(interactionState) {\n      return typeof _style === 'function' ? _style(_objectSpread(_objectSpread({}, interactionState), {}, {\n        hovered: hovered\n      })) : _style;\n    },\n    children: function children(interactionState) {\n      return typeof _children === 'function' ? _children(_objectSpread(_objectSpread({}, interactionState), {}, {\n        hovered: hovered\n      })) : _children;\n    }\n  }, rest));\n}\n\nfunction containsEvent(parent, clickTarget) {\n  if (parent === clickTarget) {\n    return true;\n  }\n\n  if (!parent) {\n    return false;\n  }\n\n  for (var _iterator = _createForOfIteratorHelperLoose(parent.childNodes), _step; !(_step = _iterator()).done;) {\n    var child = _step.value;\n\n    if (containsEvent(child, clickTarget)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction createHoverListener() {\n  var hasMouse = isServer ? false : window.matchMedia('(pointer:fine)').matches;\n  var refs = new Map();\n  var previousHoverFunc;\n  var mousePosition = {\n    x: 0,\n    y: 0\n  };\n\n  function hover(target) {\n    var hoverFunc = refs.get(target);\n\n    if (!hoverFunc) {\n      for (var _iterator2 = _createForOfIteratorHelperLoose(refs.keys()), _step2; !(_step2 = _iterator2()).done;) {\n        var r = _step2.value;\n\n        if (containsEvent(r, target)) {\n          hoverFunc = refs.get(r);\n        }\n      }\n    }\n\n    previousHoverFunc && previousHoverFunc(false);\n    hoverFunc && hoverFunc(true);\n    previousHoverFunc = hoverFunc;\n  }\n\n  function hoverEvent(event) {\n    hover(event.target);\n  }\n\n  function unhover() {\n    previousHoverFunc && previousHoverFunc(false);\n  }\n\n  function captureMousePosition(event) {\n    mousePosition.x = event.pageX;\n    mousePosition.y = event.pageY;\n  }\n\n  if (hasMouse) {\n    document.onmouseover = hoverEvent;\n    document.onmousemove = captureMousePosition;\n    document.ontouchstart = unhover;\n    document.ontouchend = unhover;\n    document.ontouchcancel = unhover;\n    document.ontouchmove = unhover;\n  }\n\n  function add(ref, setHovered) {\n    refs.set(ref, setHovered);\n  }\n\n  function remove(ref) {\n    refs.delete(ref);\n  }\n\n  return {\n    add: add,\n    remove: remove,\n    mousePosition: mousePosition,\n    hover: hover\n  };\n}\n\nfunction setAndForwardRef(_ref3) {\n  var getForwardedRef = _ref3.getForwardedRef,\n      setLocalRef = _ref3.setLocalRef;\n  return function forwardRef(ref) {\n    var forwardedRef = getForwardedRef();\n    setLocalRef(ref);\n\n    if (typeof forwardedRef === 'function') {\n      forwardedRef(ref);\n    } else if (typeof forwardedRef === 'object' && forwardedRef != null) {\n      forwardedRef.current = ref;\n    }\n  };\n}\n\nfunction enhanceScrollView(WrappedComponent) {\n  var EnhancedScrollView = function EnhancedScrollView(_ref4) {\n    var forwardedRef = _ref4.forwardedRef,\n        onScroll = _ref4.onScroll,\n        scrollEventThrottle = _ref4.scrollEventThrottle,\n        rest = _objectWithoutProperties(_ref4, _excluded3);\n\n    var onScrollInner = function onScrollInner(e) {\n      onScroll && onScroll(e);\n      var mousePosition = hoverListener.mousePosition,\n          hover = hoverListener.hover;\n      hover(document.elementFromPoint(mousePosition.x, mousePosition.y));\n    };\n\n    return React.createElement(WrappedComponent, _extends({\n      ref: forwardedRef,\n      onScroll: onScrollInner,\n      scrollEventThrottle: scrollEventThrottle || 25\n    }, rest));\n  };\n\n  return React.forwardRef(function (props, ref) {\n    return React.createElement(EnhancedScrollView, _extends({}, props, {\n      forwardedRef: ref\n    }));\n  });\n}\n\nexport var Pressable = React.forwardRef(PressableWithoutRef);\nexport var ScrollView = enhanceScrollView(NativeScrollView);\nexport var FlatList = enhanceScrollView(NativeFlatList);\nexport var VirtualizedList = enhanceScrollView(NativeVirtualizedList);","map":{"version":3,"sources":["index.tsx"],"names":["isServer","process","hoverListener","createHoverListener","rest","hostRef","React","hr","children","hovered","setRef","setAndForwardRef","getForwardedRef","setLocalRef","hostNode","interactionState","style","parent","containsEvent","hasMouse","window","refs","mousePosition","x","y","hoverFunc","previousHoverFunc","hover","event","document","add","remove","forwardedRef","EnhancedScrollView","onScrollInner","e","onScroll","scrollEventThrottle","ref","Pressable","ScrollView","enhanceScrollView","FlatList","VirtualizedList"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport type {\n  ViewProps,\n  StyleProp,\n  ViewStyle,\n  PressableStateCallbackType,\n  FlatListProps,\n  VirtualizedListProps,\n  ScrollViewProps,\n} from 'react-native';\n\nimport {\n  View,\n  Pressable as NativePressable,\n  ScrollView as NativeScrollView,\n  FlatList as NativeFlatList,\n  VirtualizedList as NativeVirtualizedList,\n  //@ts-ignore\n} from 'react-native-web';\n\nconst isServer =\n  typeof process !== 'undefined' &&\n  process.release &&\n  process.release.name === 'node';\n\nconst hoverListener = createHoverListener();\n\ninterface PressableStateCallbackTypeWeb extends PressableStateCallbackType {\n  focused?: boolean;\n  hovered?: boolean;\n}\n\ntype ChildrenType =\n  | React.ReactNode\n  | ((state: PressableStateCallbackTypeWeb) => React.ReactNode);\n\ntype StylesType =\n  | StyleProp<ViewStyle>\n  | ((state: PressableStateCallbackTypeWeb) => StyleProp<ViewStyle>);\n\ninterface HoverableProps extends ViewProps {\n  children:\n    | React.ReactNode\n    | ((state: { hovered: boolean }) => React.ReactNode);\n}\n\ninterface PressableProps extends Omit<ViewProps, 'style'> {\n  children: ChildrenType;\n  style?: StylesType;\n}\n\nexport function Hoverable({ children, ...rest }: HoverableProps) {\n  const hostRef = React.useRef<View | null>(null);\n  const [hovered, setHovered] = React.useState<boolean>(false);\n  React.useEffect(() => {\n    const hr = hostRef.current;\n    hoverListener.add(hr, setHovered);\n    return () => {\n      hoverListener.remove(hr);\n    };\n  }, [setHovered, hostRef]);\n\n  return (\n    <View\n      ref={hostRef}\n      children={\n        typeof children === 'function' ? children({ hovered }) : children\n      }\n      {...rest}\n    />\n  );\n}\n\nfunction PressableWithoutRef(\n  { style, children, ...rest }: PressableProps,\n  forwardedRef: any\n) {\n  const hostRef = React.useRef<View | null>(null);\n  const [hovered, setHovered] = React.useState<boolean>(false);\n\n  const setRef = setAndForwardRef({\n    getForwardedRef: () => forwardedRef,\n    setLocalRef: (hostNode: any) => {\n      hostRef.current = hostNode;\n    },\n  });\n\n  React.useEffect(() => {\n    const hr = hostRef.current;\n    hoverListener.add(hr, setHovered);\n    return () => {\n      hoverListener.remove(hr);\n    };\n  }, [setHovered, hostRef]);\n\n  return (\n    <NativePressable\n      //@ts-ignore\n      ref={setRef}\n      style={(interactionState: any) =>\n        typeof style === 'function'\n          ? style({ ...interactionState, hovered })\n          : style\n      }\n      children={(interactionState: any) =>\n        typeof children === 'function'\n          ? children({ ...interactionState, hovered })\n          : children\n      }\n      {...rest}\n    />\n  );\n}\n\nfunction containsEvent(parent: any, clickTarget: any) {\n  if (parent === clickTarget) {\n    return true;\n  }\n  if (!parent) {\n    return false;\n  }\n  for (let child of parent.childNodes) {\n    if (containsEvent(child, clickTarget)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction createHoverListener() {\n  let hasMouse = isServer ? false : window.matchMedia('(pointer:fine)').matches;\n\n  let refs = new Map<any, (h: boolean) => any>();\n  let previousHoverFunc: undefined | ((h: boolean) => any);\n  let mousePosition = {\n    x: 0,\n    y: 0,\n  };\n\n  function hover(target: any) {\n    // hover is targeted directly\n    let hoverFunc = refs.get(target);\n\n    // let's try to see if any of the children of the hover event are hovered\n    if (!hoverFunc) {\n      for (let r of refs.keys()) {\n        if (containsEvent(r, target)) {\n          hoverFunc = refs.get(r);\n        }\n      }\n    }\n\n    previousHoverFunc && previousHoverFunc(false);\n    hoverFunc && hoverFunc(true);\n\n    // cache the previous hover so we can un-hover this later on\n    previousHoverFunc = hoverFunc;\n  }\n\n  function hoverEvent(event: any) {\n    hover(event.target);\n  }\n\n  function unhover() {\n    previousHoverFunc && previousHoverFunc(false);\n  }\n\n  function captureMousePosition(event: any) {\n    mousePosition.x = event.pageX;\n    mousePosition.y = event.pageY;\n  }\n\n  // touch devices have a bug where the onMouseOver is handled while it should not\n  // if the user would click something it keeps hovered while it should unhover\n  // so only listen to these events if the device has a mouse\n  if (hasMouse) {\n    document.onmouseover = hoverEvent;\n    document.onmousemove = captureMousePosition;\n    document.ontouchstart = unhover;\n    document.ontouchend = unhover;\n    document.ontouchcancel = unhover;\n    document.ontouchmove = unhover;\n  }\n\n  function add(ref: any, setHovered: any) {\n    refs.set(ref, setHovered);\n  }\n\n  function remove(ref: any) {\n    refs.delete(ref);\n  }\n\n  return {\n    add,\n    remove,\n    mousePosition,\n    hover,\n  };\n}\n\nfunction setAndForwardRef({ getForwardedRef, setLocalRef }: any) {\n  return function forwardRef(ref: React.ElementRef<any>) {\n    const forwardedRef = getForwardedRef();\n    setLocalRef(ref);\n\n    // Forward to user ref prop (if one has been specified)\n    if (typeof forwardedRef === 'function') {\n      // Handle function-based refs. String-based refs are handled as functions.\n      forwardedRef(ref);\n    } else if (typeof forwardedRef === 'object' && forwardedRef != null) {\n      // Handle createRef-based refs\n      forwardedRef.current = ref;\n    }\n  };\n}\n\nfunction enhanceScrollView(WrappedComponent: any) {\n  const EnhancedScrollView = ({\n    forwardedRef,\n    onScroll,\n    scrollEventThrottle,\n    ...rest\n  }: any) => {\n    const onScrollInner = (e: any) => {\n      onScroll && onScroll(e);\n      const { mousePosition, hover } = hoverListener;\n      hover(document.elementFromPoint(mousePosition.x, mousePosition.y));\n    };\n    return (\n      <WrappedComponent\n        ref={forwardedRef}\n        onScroll={onScrollInner}\n        scrollEventThrottle={scrollEventThrottle || 25}\n        {...rest}\n      />\n    );\n  };\n\n  return React.forwardRef((props, ref) => {\n    return <EnhancedScrollView {...props} forwardedRef={ref} />;\n  });\n}\n\nexport const Pressable = React.forwardRef(PressableWithoutRef);\nexport const ScrollView = enhanceScrollView(\n  NativeScrollView\n) as React.ElementType<ScrollViewProps>;\nexport const FlatList = enhanceScrollView(NativeFlatList) as React.ElementType<\n  FlatListProps<unknown>\n>;\nexport const VirtualizedList = enhanceScrollView(\n  NativeVirtualizedList\n) as React.ElementType<VirtualizedListProps<unknown>>;\n"]},"metadata":{},"sourceType":"module"}