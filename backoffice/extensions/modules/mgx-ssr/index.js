import{useApi as e,defineModule as t}from"@directus/extensions-sdk";import{defineComponent as n,ref as r,onMounted as s,resolveComponent as a,openBlock as o,createBlock as i,withCtx as c,createElementVNode as u}from"vue";var l=n({setup(){const t=r("/ssr");return s((async()=>{const n=Object.fromEntries(new URLSearchParams(window.location.search)),r=""!=n.url&&null!=n.url&&null!=n.url?n.url:"/ssr";try{if(r.startsWith("/")){const n=e(),{data:s}=await n.get("/user/getAccessToken");t.value=`${r}${r.includes("?")?"&":"?"}access_token=${s.data.token}`}else null!==r.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)&&(t.value="/ssr")}catch(e){return console.log(e),t.value=r}})),{src:t}}});const d=["src"];var m=[],p=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",s=!0===t.singleTag,a="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(s){var o=m.indexOf(a);-1===o&&(o=m.push(a)-1,p[o]={}),n=p[o]&&p[o][r]?p[o][r]:p[o][r]=i()}else n=i();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function i(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),s=0;s<n.length;s++)e.setAttribute(n[s],t.attributes[n[s]]);var o="prepend"===r?"afterbegin":"beforeend";return a.insertAdjacentElement(o,e),e}}("\niframe{\n\t\twidth: 100% !important;\n\t\theight: 100% !important;\n\t\toverflow-y: auto !important;\n\t\tborder: unset !important;\n}\n.ssr-container #navigation .module-nav, .ssr-container #sidebar {\n    \tdisplay: none !important;\n}\n",{}),l.render=function(e,t,n,r,s,l){const m=a("private-view");return o(),i(m,{"small-header":"",class:"ssr-container"},{default:c((()=>[u("iframe",{src:e.src},"\n\t\t \n\t\t ",8,d)])),_:1})},l.__file="src/module.vue";var f=t({id:"mgx-ssr",name:"pages",icon:"density_medium",routes:[{path:"",component:l}]});export{f as default};
